<!DOCTYPE html>
<html lang="en">
<head>
    <title>The Social Matrix - OSAK Lessons</title>
    <!-- Include the header with login verification -->
    <script>
        // This prevents the page from redirecting during header load
        window.isLoadingHeader = true;
    </script>
    <link rel="stylesheet" href="/lesson/assets/CSS/style.css">
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
        }
        .content {
            margin-top: 20px;
        }
        h1 {
            color: #2b6cb0;
        }
        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eaeaea;
        }
    </style>
</head>
<body>
    <!-- Include the header -->
    <div id="header-container">
        <script>
            // Dynamically load the header
            fetch('../header.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('header-container').innerHTML = data;
                    // Allow redirection after header is loaded
                    window.isLoadingHeader = false;
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                    // Redirect to home page if header fails to load
                    window.location.href = '/lesson/';
                });
        </script>
    </div>

    <!-- Page content -->
    <div class="content">
        <h1>The Social Matrix - Breaking the Ice</h1>
        <p>Welcome to this lesson on social dynamics and how to quickly break the ice in social situations.</p>
        
        <h2>Key Concepts</h2>
        <ul>
            <li>Understanding social cues</li>
            <li>Effective conversation starters</li>
            <li>Building rapport quickly</li>
            <li>Reading body language</li>
        </ul>
        
        <h2>Practical Exercises</h2>
        <p>Try these exercises to improve your social skills:</p>
        <ol>
            <li>Practice active listening</li>
            <li>Use open-ended questions</li>
            <li>Find common interests</li>
            <li>Use appropriate humor</li>
        </ol>
        
        <p>This content is protected and only available to logged-in users.</p>
    </div>

    <script>
        // Override the default redirect behavior
        document.addEventListener('DOMContentLoaded', function() {
            const originalVerifyToken = window.verifyToken;
            if (originalVerifyToken) {
                window.verifyToken = async function() {
                    const result = await originalVerifyToken();
                    if (!result.valid && !window.isLoadingHeader) {
                        window.location.href = '/lesson/';
                    }
                    return result;
                };
            }
        });
    </script>
</body>
</html> 